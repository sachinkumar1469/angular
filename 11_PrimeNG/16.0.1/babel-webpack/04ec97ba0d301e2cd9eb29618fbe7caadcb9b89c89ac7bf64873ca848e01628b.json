{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Ingredient } from 'src/app/shared/ingredient.model';\nlet ShoppingEditComponent = class ShoppingEditComponent {\n  constructor(shoppingSrv) {\n    this.shoppingSrv = shoppingSrv;\n    this.isEdit = false;\n  }\n  ngOnInit() {\n    this.editSubscriptionId = this.shoppingSrv.editIngredient.subscribe(id => {\n      let ing = this.shoppingSrv.getIngredientById(id);\n      this.ingredientForm.setValue({\n        name: ing.name,\n        amount: ing.amount\n      });\n      this.isEdit = true;\n      this.editId = id;\n    });\n  }\n  ngOnDestroy() {\n    this.editSubscriptionId.unsubscribe();\n  }\n  onAddIngredient() {\n    if (this.ingredientForm.valid) {\n      let value = this.ingredientForm.value;\n      if (!this.isEdit) {\n        this.shoppingSrv.addNewIngredient(new Ingredient(value.name, value.amount));\n      } else {\n        this.shoppingSrv.updateIngredientById(this.editId, new Ingredient(value.name, value.amount));\n      }\n      this.ingredientForm.resetForm();\n      this.editId = -1;\n      this.isEdit = false;\n    }\n  }\n  onDelete() {\n    if (this.isEdit) {\n      this.shoppingSrv.deleteById(this.editId);\n    }\n    this.ingredientForm.resetForm();\n    this.isEdit = false;\n  }\n};\n__decorate([ViewChild(\"ingredientForm\")], ShoppingEditComponent.prototype, \"ingredientForm\", void 0);\nShoppingEditComponent = __decorate([Component({\n  selector: 'app-shopping-edit',\n  templateUrl: './shopping-edit.component.html',\n  styleUrls: ['./shopping-edit.component.css']\n})], ShoppingEditComponent);\nexport { ShoppingEditComponent };","map":{"version":3,"names":["Component","ViewChild","Ingredient","ShoppingEditComponent","constructor","shoppingSrv","isEdit","ngOnInit","editSubscriptionId","editIngredient","subscribe","id","ing","getIngredientById","ingredientForm","setValue","name","amount","editId","ngOnDestroy","unsubscribe","onAddIngredient","valid","value","addNewIngredient","updateIngredientById","resetForm","onDelete","deleteById","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sachin\\WorkSpace\\Angular_Tutorial\\06_Course_Project_Forms\\src\\app\\shopping-lists\\shopping-edit\\shopping-edit.component.ts"],"sourcesContent":["import { Component, ElementRef, EventEmitter, Output, ViewChild, OnInit, OnDestroy } from '@angular/core';\nimport { Ingredient } from 'src/app/shared/ingredient.model';\nimport { ShoppingService } from '../shopping.service';\nimport { NgForm, } from \"@angular/forms\"\nimport { Subscribable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-shopping-edit',\n  templateUrl: './shopping-edit.component.html',\n  styleUrls: ['./shopping-edit.component.css']\n})\nexport class ShoppingEditComponent implements OnInit, OnDestroy {\n\n  constructor(private shoppingSrv:ShoppingService){}\n\n  @ViewChild(\"ingredientForm\") ingredientForm!:NgForm;\n\n  editSubscriptionId!:Subscription;\n\n  isEdit:boolean = false;\n  editId!:number;\n\n  ngOnInit(): void {\n    this.editSubscriptionId = this.shoppingSrv.editIngredient.subscribe((id)=>{\n      let ing = this.shoppingSrv.getIngredientById(id);\n      this.ingredientForm.setValue({\n        name:ing.name,\n        amount:ing.amount\n      });\n      this.isEdit = true;\n      this.editId = id;\n    })\n  }\n\n  ngOnDestroy(): void {\n    this.editSubscriptionId.unsubscribe();\n  }\n\n  onAddIngredient(){\n\n    if(this.ingredientForm.valid){\n      let value = this.ingredientForm.value;\n      if(!this.isEdit){\n        this.shoppingSrv.addNewIngredient(new Ingredient(value.name,value.amount));\n      }else{\n        this.shoppingSrv.updateIngredientById(this.editId,new Ingredient(value.name,value.amount));\n      }\n      this.ingredientForm.resetForm();\n      this.editId = -1;\n      this.isEdit = false;\n    }\n  }\n\n  onDelete(){\n    if(this.isEdit){\n      this.shoppingSrv.deleteById(this.editId);\n\n    }\n    this.ingredientForm.resetForm();\n    this.isEdit = false;\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAoCC,SAAS,QAA2B,eAAe;AACzG,SAASC,UAAU,QAAQ,iCAAiC;AAU5D,IAAaC,qBAAqB,GAAlC,MAAaA,qBAAqB;EAEhCC,YAAoBC,WAA2B;IAA3B,KAAAA,WAAW,GAAXA,WAAW;IAM/B,KAAAC,MAAM,GAAW,KAAK;EAN2B;EASjDC,QAAQA,CAAA;IACN,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACH,WAAW,CAACI,cAAc,CAACC,SAAS,CAAEC,EAAE,IAAG;MACxE,IAAIC,GAAG,GAAG,IAAI,CAACP,WAAW,CAACQ,iBAAiB,CAACF,EAAE,CAAC;MAChD,IAAI,CAACG,cAAc,CAACC,QAAQ,CAAC;QAC3BC,IAAI,EAACJ,GAAG,CAACI,IAAI;QACbC,MAAM,EAACL,GAAG,CAACK;OACZ,CAAC;MACF,IAAI,CAACX,MAAM,GAAG,IAAI;MAClB,IAAI,CAACY,MAAM,GAAGP,EAAE;IAClB,CAAC,CAAC;EACJ;EAEAQ,WAAWA,CAAA;IACT,IAAI,CAACX,kBAAkB,CAACY,WAAW,EAAE;EACvC;EAEAC,eAAeA,CAAA;IAEb,IAAG,IAAI,CAACP,cAAc,CAACQ,KAAK,EAAC;MAC3B,IAAIC,KAAK,GAAG,IAAI,CAACT,cAAc,CAACS,KAAK;MACrC,IAAG,CAAC,IAAI,CAACjB,MAAM,EAAC;QACd,IAAI,CAACD,WAAW,CAACmB,gBAAgB,CAAC,IAAItB,UAAU,CAACqB,KAAK,CAACP,IAAI,EAACO,KAAK,CAACN,MAAM,CAAC,CAAC;OAC3E,MAAI;QACH,IAAI,CAACZ,WAAW,CAACoB,oBAAoB,CAAC,IAAI,CAACP,MAAM,EAAC,IAAIhB,UAAU,CAACqB,KAAK,CAACP,IAAI,EAACO,KAAK,CAACN,MAAM,CAAC,CAAC;;MAE5F,IAAI,CAACH,cAAc,CAACY,SAAS,EAAE;MAC/B,IAAI,CAACR,MAAM,GAAG,CAAC,CAAC;MAChB,IAAI,CAACZ,MAAM,GAAG,KAAK;;EAEvB;EAEAqB,QAAQA,CAAA;IACN,IAAG,IAAI,CAACrB,MAAM,EAAC;MACb,IAAI,CAACD,WAAW,CAACuB,UAAU,CAAC,IAAI,CAACV,MAAM,CAAC;;IAG1C,IAAI,CAACJ,cAAc,CAACY,SAAS,EAAE;IAC/B,IAAI,CAACpB,MAAM,GAAG,KAAK;EACrB;CAED;AA/C8BuB,UAAA,EAA5B5B,SAAS,CAAC,gBAAgB,CAAC,C,4DAAwB;AAJzCE,qBAAqB,GAAA0B,UAAA,EALjC7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,C,EACW7B,qBAAqB,CAmDjC;SAnDYA,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}