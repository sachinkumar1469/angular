{"ast":null,"code":"import { exhaustMap, take } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nclass AuthInterceptor {\n  constructor(authSrv) {\n    this.authSrv = authSrv;\n  }\n  intercept(req, next) {\n    return this.authSrv.user.pipe(take(1), exhaustMap(user => {\n      const modifiedReq = req.clone({\n        headers: req.headers.append(\"Interceptor\", \"\" + user?.token)\n      });\n      return next.handle(modifiedReq);\n    }));\n  }\n}\nAuthInterceptor.ɵfac = function AuthInterceptor_Factory(t) {\n  return new (t || AuthInterceptor)(i0.ɵɵinject(i1.AuthService));\n};\nAuthInterceptor.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthInterceptor,\n  factory: AuthInterceptor.ɵfac\n});\nexport { AuthInterceptor };","map":{"version":3,"names":["exhaustMap","take","AuthInterceptor","constructor","authSrv","intercept","req","next","user","pipe","modifiedReq","clone","headers","append","token","handle","i0","ɵɵinject","i1","AuthService","factory","ɵfac"],"sources":["C:\\Users\\Sachin\\WorkSpace\\Angular_Tutorial\\10_Authentication\\src\\app\\auth\\auth-interceptor.service.ts"],"sourcesContent":["import { HttpEvent, HttpHandler, HttpHeaders, HttpInterceptor, HttpRequest } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { Observable, exhaustAll, exhaustMap, take } from \"rxjs\";\r\nimport { AuthService } from \"./auth.service\";\r\n\r\n\r\n@Injectable()\r\nexport class AuthInterceptor implements HttpInterceptor{\r\n  constructor(private authSrv:AuthService){}\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return this.authSrv.user.pipe(take(1),exhaustMap(user=>{\r\n      const modifiedReq = req.clone({headers:req.headers.append(\"Interceptor\",\"\"+user?.token)})\r\n      return next.handle(modifiedReq);\r\n    }))\r\n  }\r\n}\r\n"],"mappings":"AAEA,SAAiCA,UAAU,EAAEC,IAAI,QAAQ,MAAM;;;AAI/D,MACaC,eAAe;EAC1BC,YAAoBC,OAAmB;IAAnB,KAAAA,OAAO,GAAPA,OAAO;EAAc;EACzCC,SAASA,CAACC,GAAqB,EAAEC,IAAiB;IAChD,OAAO,IAAI,CAACH,OAAO,CAACI,IAAI,CAACC,IAAI,CAACR,IAAI,CAAC,CAAC,CAAC,EAACD,UAAU,CAACQ,IAAI,IAAE;MACrD,MAAME,WAAW,GAAGJ,GAAG,CAACK,KAAK,CAAC;QAACC,OAAO,EAACN,GAAG,CAACM,OAAO,CAACC,MAAM,CAAC,aAAa,EAAC,EAAE,GAACL,IAAI,EAAEM,KAAK;MAAC,CAAC,CAAC;MACzF,OAAOP,IAAI,CAACQ,MAAM,CAACL,WAAW,CAAC;IACjC,CAAC,CAAC,CAAC;EACL;;AAPWR,eAAe,C;mBAAfA,eAAe,EAAAc,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA;AAAA;AAAfjB,eAAe,C;SAAfA,eAAe;EAAAkB,OAAA,EAAflB,eAAe,CAAAmB;AAAA;SAAfnB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}