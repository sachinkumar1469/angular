{"ast":null,"code":"import { exhaustMap, take } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../recipes/recipe.service\";\nimport * as i3 from \"../auth/auth.service\";\nclass DataStorageService {\n  constructor(http, recipeSrc, authSrv) {\n    this.http = http;\n    this.recipeSrc = recipeSrc;\n    this.authSrv = authSrv;\n  }\n  saveRecipes() {\n    let recipes = this.recipeSrc.getRecipes();\n    this.authSrv.user.pipe(takeLast);\n    this.http.put(\"http://localhost:8000/save\", recipes).subscribe(data => {\n      console.log(\"response\", data);\n    });\n  }\n  getRecipes() {\n    return this.authSrv.user.pipe(take(1), exhaustMap(user => {\n      return this.http.get(\"http://localhost:8000/all\", {\n        headers: {\n          \"Authorization\": \"Bearer \" + user?.token\n        }\n      });\n    })).subscribe(recipesList => {\n      this.recipeSrc.setRecipes(recipesList);\n    });\n  }\n}\nDataStorageService.ɵfac = function DataStorageService_Factory(t) {\n  return new (t || DataStorageService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.RecipeService), i0.ɵɵinject(i3.AuthService));\n};\nDataStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataStorageService,\n  factory: DataStorageService.ɵfac,\n  providedIn: \"root\"\n});\nexport { DataStorageService };","map":{"version":3,"names":["exhaustMap","take","DataStorageService","constructor","http","recipeSrc","authSrv","saveRecipes","recipes","getRecipes","user","pipe","takeLast","put","subscribe","data","console","log","get","headers","token","recipesList","setRecipes","i0","ɵɵinject","i1","HttpClient","i2","RecipeService","i3","AuthService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Sachin\\WorkSpace\\Angular_Tutorial\\10_Authentication\\src\\app\\shared\\data-storage.service.ts"],"sourcesContent":["\r\nimport {Injectable, OnInit} from \"@angular/core\";\r\nimport {HttpClient} from \"@angular/common/http\"\r\nimport { RecipeService } from \"../recipes/recipe.service\";\r\nimport { Recipe } from \"../recipes/recipe.model\";\r\nimport { AuthService } from \"../auth/auth.service\";\r\nimport { exhaustMap, take } from \"rxjs\";\r\n\r\n@Injectable({\r\n  providedIn:\"root\"\r\n})\r\nexport class DataStorageService{\r\n  constructor(private http:HttpClient,private recipeSrc:RecipeService,private authSrv:AuthService){}\r\n\r\n\r\n\r\n  saveRecipes(){\r\n    let recipes = this.recipeSrc.getRecipes();\r\n    this.authSrv.user.pipe(takeLast)\r\n    this.http.put(\"http://localhost:8000/save\",recipes).subscribe(data=>{\r\n      console.log(\"response\",data);\r\n    })\r\n  }\r\n\r\n\r\n  getRecipes(){\r\n    return this.authSrv.user.pipe(take(1),exhaustMap(user=>{\r\n      return this.http.get<any[]>(\"http://localhost:8000/all\",{\r\n        headers:{\r\n          \"Authorization\":\"Bearer \"+user?.token\r\n        }\r\n      });\r\n    }))\r\n    .subscribe(recipesList=>{\r\n      this.recipeSrc.setRecipes(recipesList);\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAMA,SAASA,UAAU,EAAEC,IAAI,QAAQ,MAAM;;;;;AAEvC,MAGaC,kBAAkB;EAC7BC,YAAoBC,IAAe,EAASC,SAAuB,EAASC,OAAmB;IAA3E,KAAAF,IAAI,GAAJA,IAAI;IAAoB,KAAAC,SAAS,GAATA,SAAS;IAAuB,KAAAC,OAAO,GAAPA,OAAO;EAAc;EAIjGC,WAAWA,CAAA;IACT,IAAIC,OAAO,GAAG,IAAI,CAACH,SAAS,CAACI,UAAU,EAAE;IACzC,IAAI,CAACH,OAAO,CAACI,IAAI,CAACC,IAAI,CAACC,QAAQ,CAAC;IAChC,IAAI,CAACR,IAAI,CAACS,GAAG,CAAC,4BAA4B,EAACL,OAAO,CAAC,CAACM,SAAS,CAACC,IAAI,IAAE;MAClEC,OAAO,CAACC,GAAG,CAAC,UAAU,EAACF,IAAI,CAAC;IAC9B,CAAC,CAAC;EACJ;EAGAN,UAAUA,CAAA;IACR,OAAO,IAAI,CAACH,OAAO,CAACI,IAAI,CAACC,IAAI,CAACV,IAAI,CAAC,CAAC,CAAC,EAACD,UAAU,CAACU,IAAI,IAAE;MACrD,OAAO,IAAI,CAACN,IAAI,CAACc,GAAG,CAAQ,2BAA2B,EAAC;QACtDC,OAAO,EAAC;UACN,eAAe,EAAC,SAAS,GAACT,IAAI,EAAEU;;OAEnC,CAAC;IACJ,CAAC,CAAC,CAAC,CACFN,SAAS,CAACO,WAAW,IAAE;MACtB,IAAI,CAAChB,SAAS,CAACiB,UAAU,CAACD,WAAW,CAAC;IACxC,CAAC,CAAC;EACJ;;AAzBWnB,kBAAkB,C;mBAAlBA,kBAAkB,EAAAqB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,aAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,WAAA;AAAA;AAAlB5B,kBAAkB,C;SAAlBA,kBAAkB;EAAA6B,OAAA,EAAlB7B,kBAAkB,CAAA8B,IAAA;EAAAC,UAAA,EAFlB;AAAM;SAEN/B,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}