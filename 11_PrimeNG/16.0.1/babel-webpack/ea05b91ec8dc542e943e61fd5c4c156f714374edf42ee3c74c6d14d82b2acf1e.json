{"ast":null,"code":"import { exhaustMap, take } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../recipes/recipe.service\";\nimport * as i3 from \"../auth/auth.service\";\nclass DataStorageService {\n  constructor(http, recipeSrc, authSrv) {\n    this.http = http;\n    this.recipeSrc = recipeSrc;\n    this.authSrv = authSrv;\n  }\n  saveRecipes() {\n    let recipes = this.recipeSrc.getRecipes();\n    this.http.put(\"http://localhost:8000/save\", recipes).subscribe(data => {\n      console.log(\"response\", data);\n    });\n  }\n  getRecipes() {\n    this.authSrv.user.pipe(take(1), exhaustMap(user => {\n      return this.http.get(\"http://localhost:8000/all\");\n    })).subscribe(recipesList => {\n      this.recipeSrc.setRecipes(recipesList);\n    });\n  }\n}\nDataStorageService.ɵfac = function DataStorageService_Factory(t) {\n  return new (t || DataStorageService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.RecipeService), i0.ɵɵinject(i3.AuthService));\n};\nDataStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataStorageService,\n  factory: DataStorageService.ɵfac,\n  providedIn: \"root\"\n});\nexport { DataStorageService };","map":{"version":3,"names":["exhaustMap","take","DataStorageService","constructor","http","recipeSrc","authSrv","saveRecipes","recipes","getRecipes","put","subscribe","data","console","log","user","pipe","get","recipesList","setRecipes","i0","ɵɵinject","i1","HttpClient","i2","RecipeService","i3","AuthService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Sachin\\WorkSpace\\Angular_Tutorial\\10_Authentication\\src\\app\\shared\\data-storage.service.ts"],"sourcesContent":["\r\nimport {Injectable, OnInit} from \"@angular/core\";\r\nimport {HttpClient} from \"@angular/common/http\"\r\nimport { RecipeService } from \"../recipes/recipe.service\";\r\nimport { Recipe } from \"../recipes/recipe.model\";\r\nimport { AuthService } from \"../auth/auth.service\";\r\nimport { exhaustMap, take } from \"rxjs\";\r\n\r\n@Injectable({\r\n  providedIn:\"root\"\r\n})\r\nexport class DataStorageService{\r\n  constructor(private http:HttpClient,private recipeSrc:RecipeService,private authSrv:AuthService){}\r\n\r\n\r\n\r\n  saveRecipes(){\r\n    let recipes = this.recipeSrc.getRecipes();\r\n    this.http.put(\"http://localhost:8000/save\",recipes).subscribe(data=>{\r\n      console.log(\"response\",data);\r\n    })\r\n  }\r\n\r\n\r\n  getRecipes(){\r\n    this.authSrv.user.pipe(take(1),exhaustMap(user=>{\r\n      return this.http.get<any[]>(\"http://localhost:8000/all\");\r\n    }))\r\n\r\n    .subscribe(recipesList=>{\r\n      this.recipeSrc.setRecipes(recipesList);\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAMA,SAASA,UAAU,EAAEC,IAAI,QAAQ,MAAM;;;;;AAEvC,MAGaC,kBAAkB;EAC7BC,YAAoBC,IAAe,EAASC,SAAuB,EAASC,OAAmB;IAA3E,KAAAF,IAAI,GAAJA,IAAI;IAAoB,KAAAC,SAAS,GAATA,SAAS;IAAuB,KAAAC,OAAO,GAAPA,OAAO;EAAc;EAIjGC,WAAWA,CAAA;IACT,IAAIC,OAAO,GAAG,IAAI,CAACH,SAAS,CAACI,UAAU,EAAE;IACzC,IAAI,CAACL,IAAI,CAACM,GAAG,CAAC,4BAA4B,EAACF,OAAO,CAAC,CAACG,SAAS,CAACC,IAAI,IAAE;MAClEC,OAAO,CAACC,GAAG,CAAC,UAAU,EAACF,IAAI,CAAC;IAC9B,CAAC,CAAC;EACJ;EAGAH,UAAUA,CAAA;IACR,IAAI,CAACH,OAAO,CAACS,IAAI,CAACC,IAAI,CAACf,IAAI,CAAC,CAAC,CAAC,EAACD,UAAU,CAACe,IAAI,IAAE;MAC9C,OAAO,IAAI,CAACX,IAAI,CAACa,GAAG,CAAQ,2BAA2B,CAAC;IAC1D,CAAC,CAAC,CAAC,CAEFN,SAAS,CAACO,WAAW,IAAE;MACtB,IAAI,CAACb,SAAS,CAACc,UAAU,CAACD,WAAW,CAAC;IACxC,CAAC,CAAC;EACJ;;AArBWhB,kBAAkB,C;mBAAlBA,kBAAkB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,aAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,WAAA;AAAA;AAAlBzB,kBAAkB,C;SAAlBA,kBAAkB;EAAA0B,OAAA,EAAlB1B,kBAAkB,CAAA2B,IAAA;EAAAC,UAAA,EAFlB;AAAM;SAEN5B,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}